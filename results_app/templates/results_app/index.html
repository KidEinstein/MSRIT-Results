{% extends "results_app/base.html" %}
{% block content %}
<div class="panel-group" id="collapse">
    <!--USN Panel-->
    <div class="panel panel-default">
        <div class="panel-heading" data-toggle="collapse" data-parent="#collapse" href="#collapse-one">
            <h2 class="panel-title">Search By USN</h2>
        </div>
        <div id="collapse-one" class="panel-collapse collapse in">
            <div class="panel-body">
                <form role="form" class="form-horizontal" action="{% url 'results_app:usn_search' %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <div class="col-xs-offset-1 col-xs-10 col-sm-6 col-sm-offset-3 input-group">
                            <span class="input-group-addon">1MS</span>
                            <input type="text" class="form-control" id="usn" placeholder="USN" name="usn" style="text-transform: uppercase;" required="required" pattern="^\d\d[a-z A-Z][a-z A-Z]\d\d\d"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-success col-xs-4 col-xs-offset-4 col-sm-2 col-sm-offset-5">Search</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Name Panel-->
    <div class="panel panel-default">
        <div class="panel-heading" data-toggle="collapse" data-parent="#collapse" href="#collapse-two">
            <h2 class="panel-title">Search By Name</h2>
        </div>
        <div id="collapse-two" class="panel-collapse collapse in">
            <div class="panel-body">
                <form role="form" class="form-horizontal" action="{% url 'results_app:student_name_list' %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <div class="col-xs-offset-1 col-xs-10 col-sm-6 col-sm-offset-3 input-group  input-group">
                            <div class="input-group-addon">
                                <span class="glyphicon glyphicon-user"></span>
                            </div>
                            <input type="text" class="form-control col-xs-6" id="student_name" placeholder="Name" name="student_name" required="required" />
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-success col-xs-4 col-xs-offset-4 col-sm-2 col-sm-offset-5">Search</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Sem Panel-->
    <div class="panel panel-default">
        <div class="panel-heading" data-toggle="collapse" data-parent="#collapse" href="#collapse-three">
            <h2 class="panel-title">Semester Wise Result</h2>
        </div>
        <div id="collapse-three" class="panel-collapse collapse in">
            <div class="panel-body">
                <form role="form" class="form-horizontal" action="{% url 'results_app:get_sem_results' %}" method="get">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="branch" class="control-label col-sm-3">Branch:</label>
                        <div class="btn-group col-sm-8" data-toggle="buttons" id="branch">
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" required value="CS" />CSE
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="IS" />ISE
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="EC" />EC
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="ME" />MECH
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="EE" />EEE
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="CV" />CIVIL
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="TE" />TC
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="IT" />IT
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="IM" />IEM
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="CH" />CHEM
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="ML" />ML
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="branch" value="BT" />BT
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" id="at" name="branch" value="AT" />AT
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="semesters" class="control-label col-xs-3">Semester:</label>
                        <div class="col-sm-9">

                        <div class="btn-group btn-group-justified" data-toggle="buttons" id="semesters">
                            <label class="btn btn-primary">
                                <input type="radio" name="semester" required value="1" />1
                            </label>
                            <label class="btn btn-primary ">
                                <input type="radio" name="semester" value="2" />2
                            </label>
                            <label class="btn btn-primary">
                                <input type="radio" name="semester" value="3" />3
                            </label>
                            <label class="btn btn-primary">
                                <input type="radio" name="semester" value="4" />4
                            </label>
                            <label class="btn btn-primary">
                                <input type="radio" name="semester" value="5" />5
                            </label>
                            <label class="btn btn-primary">
                                <input type="radio" name="semester" value="6" />6
                            </label>
                            <label class="btn btn-primary">
                                <input type="radio" name="semester" value="7" />7
                            </label>
                            <label class="btn btn-primary">
                                <input type="radio" name="semester" value="8" />8
                            </label>
                            <label class="btn btn-primary at-sem">
                                <input type="radio" name="semester" value="9" />9
                            </label>
                            <label class="btn btn-primary at-sem">
                                <input type="radio" name="semester" value="10" />10
                            </label>

                        </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-success col-xs-4 col-xs-offset-4 col-sm-2 col-sm-offset-5">Search</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Subject Panel-->
    <div class="panel panel-default">
        <div class="panel-heading" data-toggle="collapse" data-parent="#collapse" href="#collapse-four">
            <h2 class="panel-title">Subject Wise Result</h2>
        </div>
        <div id="collapse-four" class="panel-collapse collapse in">
            <div class="panel-body">
                <form role="form" class="form-horizontal" action="{% url 'results_app:get_subject_results' %}" method="get">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="department" class="control-label col-sm-3">Department:</label>
                        <div class="btn-group col-sm-8" data-toggle="buttons" id="department">
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="CS" required="required" />CSE
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="IS" />ISE
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="EC" />EC
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="ME" />MECH
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="EE" />EEE
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="CV" />CIVIL
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="TC" />TC
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="IT" />IT
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="IM" />IEM
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="CH" />CHEM
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="ML" />ML
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="BT" />BT
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="HS" />HSS
                            </label>
                            <label class="btn btn-primary col-xs-3 col-sm-2">
                                <input type="radio" name="department" value="AR" />AT
                            </label>
                            <label class="btn btn-primary col-xs-4 col-sm-3">
                                <input type="radio" name="department" value="FY" id="first-year" />First Year
                            </label>
                        </div>
                    </div>

                    <div id="first-year-subjects">
                        <div class="form-group">
                            <label for="fybranch" class="control-label col-sm-3">Branch:</label>
                            <div class="btn-group col-sm-8" data-toggle="buttons" id="fybranch">
                                <input type="radio" id="dummy" name="fybranch" value="NO" style="display:none;"/>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="CS" id="fycs" />CSE
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="IS" />ISE
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="EC" />EC
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="ME" />MECH
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="EE" />EEE
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="CV" />CIVIL
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="TC" />TC
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="IT" />IT
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="IM" />IEM
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="CH" />CHEM
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="ML" />ML
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="BT" />BT
                                </label>
                                <label class="btn btn-primary col-xs-3 col-sm-2">
                                    <input type="radio" name="fybranch" value="AT" />AT
                                </label>

                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-xs-3" for="subject-list">Subject:</label>
                        <div class="col-sm-5 col-sm-offset-1">
                            <select name="course_code" class="form-control" required id="subject-list"></select>
                        </div>

                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-success col-xs-4 col-xs-offset-4 col-sm-2 col-sm-offset-5">Search</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script>
            $(document).ready(function(){
                $("input").prop('checked', false);
                $("#first-year-subjects").hide();
                $(".at-sem").hide();
            });
            $("input[name=branch]").change(function(){
                if($('#at').is(':checked')) {
                    $('.at-sem').show()
                }
                else {
                    $('.at-sem').hide()
                }
            })
            $("input[name=department]").change(function(){
                if ($('#first-year').is(':checked')) {
                    $('#dummy').prop('checked', false);
                    $('#first-year-subjects').show();
                    $('#fycs').prop('required', true);
                }
                else {
                    $('#dummy').prop('checked', true);
                    $('#first-year-subjects').hide();
                    $('#fycs').prop('required', false);
                }
                $.ajax({url: "{% url 'results_app:get_subjects' %}", type: "POST", data: {csrfmiddlewaretoken: "{{csrf_token}}", department: $("input[name=department]:checked").val()}, success: function(result){
                    $("#subject-list").html(result);
                }});
            });



</script>

{% endblock %}
